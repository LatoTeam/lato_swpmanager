<%
today_tasks = @tasks.where(completed_date: Date.today)
yesterday_tasks = @tasks.where(completed_date: Date.yesterday)
%>

<% if !today_tasks.empty? || !yesterday_tasks.empty? %>
  <table class="table">
    <% if !today_tasks.empty? %>
      <tr>
        <th>Today info</th>
        <td></td>
      </tr>
      <tr>
        <td>Tasks completed</td>
        <td><%= today_tasks.length %></td>
      </tr>
      <tr>
        <td>Tasks expected time</td>
        <td><%= today_tasks.sum(:expected_work_time) %></td>
      </tr>
      <tr>
        <td>Tasks real time</td>
        <td><%= today_tasks.sum(:real_work_time) %></td>
      </tr>
    <% end %>
    <% if !yesterday_tasks.empty? %>
      <tr>
        <th>Yesterday info</th>
        <td></td>
      </tr>
      <tr>
        <td>Tasks completed</td>
        <td><%= yesterday_tasks.length %></td>
      </tr>
      <tr>
        <td>Tasks expected time</td>
        <td><%= yesterday_tasks.sum(:expected_work_time) %></td>
      </tr>
      <tr>
        <td>Tasks real time</td>
        <td><%= yesterday_tasks.sum(:real_work_time) %></td>
      </tr>
    <% end %>
  </table>
<% else %>
  <p>No data to show</p>
<% end %>
